var Dropdown=function(){var a="animated",b="no-animation",c="active",d="<div class='current'><span class='item'><%= current %></span></div><ul role='listbox' class='dd-list'><% _.each(items, function(item) { %><li role='option' id='<%= item.label.replace(\" \", \"-\") %>' data-label='<%= item.label %>' data-value='<%= item.value %>'><%= item.label%></li><% }); %></ul>",e=Backbone.Model.extend({defaults:{label:"Default",value:1,isSelected:!1}}),f=Backbone.Collection.extend({model:e,select:function(a){var b=this.findWhere({value:a}),c=this.getCurrent();c&&c.set("isSelected",!1,{silent:!0}),b.set("isSelected",!0)},getCurrent:function(){return this.findWhere({isSelected:!0})}}),g=Backbone.View.extend({tagName:"div",className:"dropdown",template:_.template(d),events:{"click li":"_chooseItem","click .current":"open"},initialize:function(){return _.bindAll(this,"close"),this.collection=new f,this.listenTo(this.collection,"change:isSelected",this.render),_.defaults(this.options,Dropdown.configure()),Dropdown._register(this),this},render:function(){var c=this.collection.findWhere({isSelected:!0}),d=this.options.theme,e=this.options.animated?a:b,f=this.template({items:this.collection.toJSON(),current:c?c.get("label"):null});return this.$el.html(f).addClass(e+" "+d),this},_chooseItem:function(a){var b=$(a.currentTarget).data("value");return this.value(b),this.close(),this},open:function(a){return a.stopPropagation(),$("body").on("click",this.close),this.$("ul").addClass(c),this},close:function(){return $("body").off("click",this.close),this.$("ul").removeClass(c),this},value:function(a){var b;return a&&this.collection.select(a),b=this.collection.getCurrent(),b?b.get("value"):""}});return g}();Dropdown._options={},Dropdown._elements=[],Dropdown._register=function(a){this._elements.push(a)},Dropdown.configure=function(a){return a&&_.extend(this._options,a),this._options};var SliderBar=function(){var a=Backbone.Model.extend({defaults:{max:10,min:0,viewMax:300,value:0,viewValue:0,decimals:0},initialize:function(){this.on({"change:viewValue":this.calculateModel,"change:viewMax":this.responsive})},calculateModel:function(){var a=this.toJSON(),b=Math.abs(a.max-a.min)*(0+a.viewValue)/Math.abs(a.viewMax);return this.set("value",b.toFixed(a.decimals)),this},responsive:function(){var a=this.previous("viewMax"),b=this.previous("viewValue"),c=this.get("viewMax");this.set("viewValue",c*(b||1)/a,{validate:!0})},value:function(a){this.set("value",a,{validate:!0});var b=this.get("value")*this.get("viewMax")/this.get("max");this.set("viewValue",b,{validate:!0})},validate:function(a){return a.viewValue>a.viewMax||a.value>a.max?"value larger than max":a.viewValue<0||a.value<a.min?"value smaller than mix":void 0}}),b=Backbone.View.extend({tagName:"div",events:{mousemove:"initDrag",mousedown:"mousedown",mouseup:"mouseup",click:"updatePosition",selectstart:"preventSelect"},defaults:{theme:"theme-green",horizontal:!0},className:"slider-bar",initialize:function(b){var c=b&&b.defaults?b.defaults:{};return _.defaults(c,SliderBar._defaults),this.model=new a(c),this.listenTo(this.model,"change:viewValue",this.render),_.bindAll(this,"respond"),$(window).resize(this.respond),SliderBar._elements.push(this),this},render:function(){var a=$('<div class="value-bar"></div>'),b=this.model.toJSON(),c=this.isDown?b.viewValue:b.value*b.viewMax/b.max-7,d=_.defaults(SliderBar._options,this.defaults);return this.options=_.defaults(this.options,d),this.$el.html("").append(a).addClass(this.options.horizontal?"horizontal":"vertical").addClass(this.options.theme),this.respond().addTicks(),this.options.horizontal?this.$(".value-bar").css({left:c}):this.$(".value-bar").css({top:c}),this.dValue&&(this.dValue.html(b.value),this.dValue.css("left",c)),this},addTicks:function(){for(var a=0;a<=this.model.get("max");a++){var b=$('<div class="tick" />');this.options.horizontal?b.css("left",a*this.model.get("viewMax")/this.model.get("max")):b.css("top",a*this.model.get("viewMax")/this.model.get("max")),this.$el.append(b)}return this},respond:function(){var a=this.options&&this.options.horizontal?this.$el.width():this.$el.height();return this.model.set("viewMax",a),this},mousedown:function(){return this.isDown=!0,this.options.label&&(this.dValue=this.dValue||$('<div class="value-display"></div>').hide(),this.$el.before(this.dValue),this.dValue.fadeIn("fast")),this},mouseup:function(){return this.isDown=!1,this.render(),this.dValue.fadeOut("fast"),this},initDrag:function(a){return this.isDown&&this.updatePosition(a),this},updatePosition:function(a){var b=this.options.horizontal?a.pageX-this.$el[0].offsetLeft-5:a.pageY-this.$el[0].offsetTop-5;this.model.set("viewValue",b,{validate:!0})},preventSelect:function(a){return a.originalEvent.preventDefault(),!1},value:function(a){return _.isNumber(a)?(this.model.value(a),void 0):this.model.get("value")}});return b}();SliderBar._elements=[],SliderBar._options={},SliderBar._defaults={},SliderBar.configure=function(a){return _.extend(SliderBar._options,a.options),_.extend(SliderBar._defaults,a.defaults),SliderBar._options};var ToggleSwitch=function(){var a=Backbone.Model.extend({defaults:{value:!0,enable:!0},initialize:function(a,b){_.extend(this,a),this.set(b)},toggle:function(a){this.set(a,!this.get(a))}}),b=Backbone.View.extend({tagName:"div",className:"toggle-switch",defaults:{},events:{click:"toggle"},initialize:function(b){var c=b&&b.defaults?b.defaults:{},d=b&&b.attributes?b.attributes:{};return this.model=b&&b.model?b.model:new a(d,c),this.options=b,this.listenTo(this.model,"change:value",this.render),ToggleSwitch._elements.push(this),this},render:function(){var a=this.model.get("value")?"active":"",b=this.model.get("enable")?"":"disabled",c=ToggleSwitch.configure(),d=this.options&&this.options.theme?this.options.theme:c.theme,e=this.options&&this.options.animated||c.animated?"animate":"";return this.$el.removeClass().addClass([d,e,a,b,this.className].join(" ")).html(a?'<span class="value">'+c.onValue+"</span>":'<span class="value">'+c.offValue+"</span>").attr({"aria-checked":this.model.get("value"),"aria-label":this.model.get("label"),"aria-readonly":b,role:"checkbox",tabindex:"0"}),this.model.get("enable")?this.delegateEvents():this.undelegateEvents(),this},toggle:function(){return this.model.toggle("value"),this},enable:function(a){"undefined"==typeof a?this.model.set("enable",!0):this.model.set("enable",a)},disable:function(){this.enable(!1)}});return b}();ToggleSwitch._elements=[],ToggleSwitch._options={theme:"theme-green",animated:!1,onValue:"On",offValue:"Off"},ToggleSwitch.configure=function(a){return a&&(_.each(a,function(a,b){ToggleSwitch._options[b]=a}),_.each(ToggleSwitch._elements,function(a){a.render()})),ToggleSwitch._options};